<?xml version="1.0" encoding="UTF-8"?>
<vxml version="2.1" application="http://webhosting.voxeo.net/170418/www/root.vxml">

    <property name="inputmodes" value="dtmf" />

    <prompt bargein="false">
        Welcome to Forêt Marché!
        <break time="500" />
        Bonjour a Forêt Marché!
        <!-- <audio src="http://www.adline.com/mobile?code=12s4" /> -->
    </prompt>

    <!-- entering offerings, main menu -->
    <menu id="menu_product" scope="dialog">
        <prompt>
            <break time="1000" />
            Please which product you want to sell
        </prompt>
        <prompt>
            <enumerate>
                <break time="1000" />
                For
                <value expr="_prompt" />
                , Press
                <value expr="_dtmf" />
            </enumerate>
        </prompt>

        <choice event="fluid_product_selection" dtmf="1" message="Shea Butter">Shea Butter</choice>
        <choice event="kg_product_selected" dtmf="2" message="Honey">Honey</choice>
        <choice event="kg_product_selected" dtmf="3" message="Essential Oils">Essential Oils</choice>

        <noinput>
            No input, we will repeat the product list
            <reprompt />
        </noinput>

        <nomatch>
            Sorry, no match has been found with that number
            <reprompt />
        </nomatch>
    </menu>


    <!-- event for product selection-->
    <catch event="fluid_product_selection">
        <prompt>
            <break time="200" />
        </prompt>
        <assign name="product" expr="_message" />
        <assign name="units" expr="'liters'" />
        <goto next="#details" />
    </catch>


    <catch event="kg_product_selected">
        <prompt>
            This is not implemented yet, we are closing now the application. Goodbye!
            <break time="200" />
        </prompt>
        <disconnect />
    </catch>


    <form id="details">
        <field name="form_quantity" type="number">
            <prompt>
                How many
                <value expr="units" />
                of
                <value expr="product" />
                ?
                Enter the quantity and press hash
            </prompt>

            <filled>
                <assign name="quantity" expr="form_quantity" />
            </filled>
        </field>


        <field name="form_price" type="number">
            <prompt>
                How much is the price per 
                <value expr="units" />
                for
                <value expr="product" />
                ?
                Enter the price and press hash
            </prompt>

            <filled>
                <assign name="price" expr="form_price" />
            </filled>
        </field>
    </form>


    <block>
        <submit next="http://65.29.170.122/getData" method="post" namelist="name city country cityTime formatTime" />
    </block>

</vxml>