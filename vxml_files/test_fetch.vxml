<?xml version="1.0" encoding="UTF-8"?>
<vxml version="2.1" application="http://webhosting.voxeo.net/170418/www/root.vxml">


<!-- <property name="inputmodes" value="dtmf" /> -->

<data name="offerrequest" src="http://forest-marche.herokuapp.com/api/v1/offers" method="get"/>
 <form>
        <block>
            <var name="offers" expr="offerrequest.data"/>
            <!-- <var name="response" expr="'Response not defined...'" /> -->
            <prompt>
            20
            Hello world!
            <var name="offer_id" expr="29"/>
            <var name="quantity" expr="33"/>

            <data name="submission_response" enctype="form-data" src="http://forest-marche.herokuapp.com/api/v1/bids" method="post" fetchtimeout="15s" namelist="offer_id quantity session.callerid" />
            
            <!-- <assign name="response" expr="submission_response" />
            <value expr="response" /> -->
            </prompt>
        </block>
          <catch event="error.badfetch">
        <prompt bargein="false">Submission responded with BadFetch</prompt>
    </catch>
    </form>

    <catch event="error.badfetch">
        <prompt bargein="false">Submission responded with BadFetch</prompt>
    </catch>
    <catch event="error">
        <prompt bargein="true">Submission responded with BadFetch
        <value expr="_message"/>
        </prompt>
    </catch>


</vxml>
